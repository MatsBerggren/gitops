
apiVersion: v1
kind: ConfigMap
metadata:
  name: argocd-cm
  namespace: argocd
data:
  kustomize.buildOptions: --load-restrictor LoadRestrictionsNone
  resource.compareoptions: |
    ignoreAggregatedRoles: true
    ignoreResourceStatusField: true
  resource.customizations: |
    "*":
      ignoreDifferences:
        jsonPointers:
          - /metadata/managedFields
          - /metadata/annotations/kubectl.kubernetes.io~1last-applied-configuration
    "*/Namespace":
      ignoreDifferences:
        jsonPointers:
          - /metadata/annotations/field.cattle.io~1projectId
          - /metadata/labels/field.cattle.io~1projectId
    "v1/Service":
      ignoreDifferences:
        jsonPointers:
          - /metadata/annotations/field.cattle.io~1publicEndpoints
          - /metadata/annotations/metallb.io~1ip-allocated-from-pool
          - /spec/clusterIP
          - /spec/clusterIPs
          - /spec/healthCheckNodePort
          - /spec/ports/*/nodePort
          - /status/loadBalancer
    "networking.k8s.io/Ingress":
      ignoreDifferences:
        jsonPointers:
          - /metadata/annotations/field.cattle.io~1publicEndpoints
    "apps/Deployment":
      ignoreDifferences:
        jsonPointers:
          - /spec/template/metadata/annotations/cattle.io~1timestamp
          - /spec/template/spec/containers/*/resources
          - /spec/template/spec/initContainers/*/resources
          - /spec/template/spec/securityContext/seccompProfile
          - /spec/template/spec/containers/*/securityContext/seccompProfile
    "apps/StatefulSet":
      ignoreDifferences:
        jsonPointers:
          - /spec/template/spec/containers/*/resources
          - /spec/template/spec/initContainers/*/resources
          - /spec/template/spec/securityContext/seccompProfile
          - /spec/template/spec/containers/*/securityContext/seccompProfile
    "apps/DaemonSet":
      ignoreDifferences:
        jsonPointers:
          - /spec/template/spec/containers/*/resources
          - /spec/template/spec/initContainers/*/resources
          - /spec/template/spec/securityContext/seccompProfile
          - /spec/template/spec/containers/*/securityContext/seccompProfile
